<div class="row">
	<!-- basic information -->
	<div class="col-md-5 col-md-offset-1">
		<div class="panel panel-info">
			<div class="panel-heading clearfix">
				<label class="label label-info pull-left">基本信息</label>
				<form editable-form name="topicForm" onaftersave="update_topic()" ng-show="topicForm.$visible">
					<button type="submit" class="btn btn-xs btn-success pull-right" aria-hidden="true" ng-disabled="topicForm.$waiting">
						<span class="glyphicon glyphicon-saved"></span>保存
					</button>
					<button type="button" style="margin-right: 15px" class="btn btn-xs btn-danger pull-right" aria-hidden="true" ng-disabled="topicForm.$waiting" ng-click="topicForm.$cancel()">取消</button>
				</form>
				<button  ng-if="logined" id ="updateButton" class="btn btn-xs btn-success pull-right" aria-hidden="true" ng-click="topicForm.$show()" ng-show="!topicForm.$visible">
					<span class="glyphicon glyphicon-pencil"></span> 修改
				</button>
			</div>
			<div class="panel-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="col-md-4 control-label">Topic ID</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.id"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">名称</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.name"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">编码类型</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.codecType" editable-select="topic.codecType" e-form="topicForm" e-name="codecType" e-ng-options="codec for codec in codec_types"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label ">存储类型</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.storageType"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">Endpoint</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.endpointType" editable-select="topic.endpointType" e-form="topicForm" e-name="endpointType" e-ng-options="endpoint for endpoint in endpoint_types"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">状态</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.status|| 'Not Set'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">创建时间</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.createTime | date : 'y/M/d, h:mm:ss a'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">修改时间</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.lastModifiedTime | date : 'y/M/d, h:mm:ss a'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">负责人1</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.owner1" editable-text="topic.owner1" e-form="topicForm" e-name="owner1"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">电话1</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.phone1" editable-text="topic.phone1" e-form="topicForm" e-name="phone1"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">负责人2</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.owner2" editable-text="topic.owner2" e-form="topicForm" e-name="owner2"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">电话2</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.phone2" editable-text="topic.phone2" e-form="topicForm" e-name="phone2"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label">描述</label>
						<div class="col-md-8" style="padding-top: 7px">
							<span ng-bind="topic.description" editable-text="topic.description" e-form="topicForm" e-name="description"></span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="panel panel-info">
			<div class="panel-heading">
				<label class="label label-info">Kafka 属性</label>
			</div>
			<div class="panel-body">
				<table class="table table-condensed table-responsive">
					<thead>
						<th class="col-md-1">#</th>
						<th class="col-md-5">名称</th>
						<th class="col-md-5">值</th>
					</thead>
					<tbody>
						<tr ng-repeat="property in topic.properties">
							<td style="width: 5%;"><label ng-bind="$index + 1"></label></td>
							<td>{{property.name}}</td>
							<td>{{property.value}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!-- partition information -->
	<div class="col-md-4">
		<div class="panel panel-info">
			<div class="panel-heading">
				<label class="label label-info">Partition 信息</label>
				<button ng-click="add_partition()" class="btn btn-xs btn-success" style="float: right;" ng-show="topicForm.$visible">
					<span class="glyphicon glyphicon-plus"></span> 增加 Partition
				</button>
			</div>
			<div class="panel-body">
				<table class="table table-condensed table-responsive">
					<thead>
						<tr>
							<th style="border: none; width: 5%">#</th>
							<th style="border: none;">Datasource / 读</th>
							<th style="border: none;">Datasource / 写</th>
							<th class="col-md-3"></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="partition in topic.partitions">
							<td style="width: 5%;"><label ng-bind="$index + 1"></label></td>
							<td><span ng-bind="partition.readDatasource"></span></td>
							<td><span ng-bind="partition.writeDatasource"></span></td>
						</tr>
						<tr ng-repeat="partition in new_partitions" ng-show="topicForm.$visible">
							<td style="width: 5%;"><label ng-bind="$index + 1 + {{partitionCount}}"></td>
							<td><select ng-model="partition.readDatasource" onshow="load_datasource_names()" ng-options="ds for ds in datasource_names" class="form-control"></select></td>
							<td><select ng-model="partition.writeDatasource" ng-options="ds for ds in datasource_names" class="form-control"></select></td>
							<td width="150px">
								<button type="button" ng-show="partition.id==-1" ng-click="remove_partition($index)" class="btn btn-danger btn-xs">
									<span class="glyphicon glyphicon-remove-circle"></span> 删除
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="panel panel-info">
			<div class="panel-heading">
				<label class="label label-info">Consumer 信息</label>
			</div>
			<div class="panel-body">
				<table class="table table-condensed table-responsive">
					<thead>
						<th class="col-md-1">ID</th>
						<th class="col-md-5">消费集群</th>
						<th class="col-md-5">应用</th>
					</thead>
					<tbody>
						<tr ng-repeat="consumer in consumers">
							<td>{{consumer.id}}</td>
							<td>{{consumer.name}}</td>
							<td>{{consumer.appIds}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>