<div class="row">
	<!-- basic information -->
	<div class="col-md-5 col-md-offset-1">
		<div class="panel panel-info">
			<div class="panel-heading clearfix">
				<label class="label label-info pull-left">基本信息</label>
				<form editable-form name="topicForm" onaftersave="update_topic()" ng-show="topicForm.$visible">
					<button type="submit" class="btn btn-xs btn-success pull-right" aria-hidden="true" ng-disabled="topicForm.$waiting">
						<span class="glyphicon glyphicon-saved"></span>保存
					</button>
					<button type="button" style="margin-right: 15px" class="btn btn-xs btn-danger pull-right" aria-hidden="true" ng-disabled="topicForm.$waiting" ng-click="topicForm.$cancel()">取消</button>
				</form>
				<button ng-if="logined" id="updateButton" class="btn btn-xs btn-success pull-right" aria-hidden="true" ng-click="topicForm.$show()" ng-show="!topicForm.$visible">
					<span class="glyphicon glyphicon-pencil"></span> 修改
				</button>
			</div>
			<div class="panel-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">Topic ID</label>
						<div class="col-md-8">
							<span ng-bind="topic.id"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">名称</label>
						<div class="col-md-8">
							<span ng-bind="topic.name"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">编码类型</label>
						<div class="col-md-8">
							<span ng-bind="topic.baseCodecType" editable-select="topic.baseCodecType" e-form="topicForm" e-name="baseCodecType" e-ng-options="codec for codec in codec_types"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label " style="padding-top: 0px">开启优先队列功能？</label>
						<div class="col-md-8">
							<span ng-bind="topic.priorityMessageEnabled" e-form="topicForm" editable-select="topic.priorityMessageEnabled" e-name="priorityMessageEnabled" e-ng-options="op for op in Ops"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label " style="padding-top: 0px">需要压缩？</label>
						<div class="col-md-8">
							<span ng-bind="topic.needCompress" e-form="topicForm" editable-select="topic.needCompress" e-name="needCompress" e-ng-options="op for op in Ops"></span>
						</div>
					</div>
					<div ng-show="(topic.needCompress && !topicForm.$visible)||(topicForm['$data']['needCompress'] && topicForm.$visible)" class="form-group">
						<label class="col-md-4 control-label " style="padding-top: 0px">压缩类型</label>
						<div class="col-md-8">
							<span ng-bind="topic.compressionType" e-form="topicForm" editable-select="topic.compressionType" e-name="compressionType" e-ng-options="compressionType for compressionType in compressionTypes"></span>
						</div>
					</div>
					<div ng-show="(topic.needCompress && topic.compressionType=='deflater' && !topicForm.$visible)||(topicForm['$data']['needCompress'] && topicForm['$data']['compressionType']=='deflater' && topicForm.$visible)" class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">压缩程度</label>
						<div class="col-md-8">
							<span ng-bind="topic.compressionLevel" editable-range="topic.compressionLevel" e-form="topicForm" e-name="compressionLevel" e-step="1" e-min="1" e-max="9"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">Endpoint</label>
						<div class="col-md-8">
							<span ng-bind="topic.endpointType"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">消费重试策略</label>
						<div class="col-md-8">
							<span ng-bind="topic.consumerRetryPolicy" editable-text="topic.consumerRetryPolicy" e-form="topicForm" e-name="consumerRetryPolicy"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">ACK 超时(秒)</label>
						<div class="col-md-8">
							<span ng-bind="topic.ackTimeoutSeconds" editable-range="topic.ackTimeoutSeconds" e-form="topicForm" e-name="ackTimeoutSeconds" e-step="5" e-min="5" e-max="200"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">状态</label>
						<div class="col-md-8">
							<span ng-bind="topic.status|| 'Not Set'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">数据库分区大小</label>
						<div class="col-md-8">
							<span ng-bind="topic.storagePartitionSize"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">重发分区大小</label>
						<div class="col-md-8">
							<span ng-bind="topic.resendPartitionSize"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">数据库分区数量</label>
						<div class="col-md-8">
							<span ng-bind="topic.storagePartitionCount"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">broker分组</label>
						<div class="col-md-8">
							<span ng-bind="topic.brokerGroup" onshow="load_broker_groups()" editable-select="topic.brokerGroup" e-form="topicForm" e-name="brokerGroup" e-ng-options="brokerGroup for brokerGroup in broker_groups"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">创建时间</label>
						<div class="col-md-8">
							<span ng-bind="topic.createTime | date : 'y/M/d, h:mm:ss a'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">修改时间</label>
						<div class="col-md-8">
							<span ng-bind="topic.lastModifiedTime | date : 'y/M/d, h:mm:ss a'"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">负责人1</label>
						<div class="col-md-8">
							<span ng-bind="topic.owner1" editable-text="topic.owner1" e-form="topicForm" e-name="owner1"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">电话1</label>
						<div class="col-md-8">
							<span ng-bind="topic.phone1" editable-text="topic.phone1" e-form="topicForm" e-name="phone1"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">负责人2</label>
						<div class="col-md-8">
							<span ng-bind="topic.owner2" editable-text="topic.owner2" e-form="topicForm" e-name="owner2"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">电话2</label>
						<div class="col-md-8">
							<span ng-bind="topic.phone2" editable-text="topic.phone2" e-form="topicForm" e-name="phone2"></span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-4 control-label" style="padding-top: 0px">描述</label>
						<div class="col-md-8">
							<span ng-bind="topic.description" editable-text="topic.description" e-form="topicForm" e-name="description"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- partition information -->
	<div class="col-md-4">
		<div class="panel panel-info">
			<div class="panel-heading">
				<label class="label label-info">Partition 信息</label>
				<button ng-click="add_partition()" class="btn btn-xs btn-success" style="float: right;" ng-show="topicForm.$visible">
					<span class="glyphicon glyphicon-plus"></span> 增加 Partition
				</button>
			</div>
			<div class="panel-body">
				<table class="table table-condensed table-responsive">
					<thead>
						<tr>
							<th class="col-md-1">#</th>
							<th class="col-md-4">Datasource / 读</th>
							<th class="col-md-4">Datasource / 写</th>
							<th class="col-md-3"></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="partition in topic.partitions">
							<td style="width: 5%;"><span ng-bind="partition.id"></label></td>
							<td ng-bind="partition.readDatasource" onshow="load_datasource_names()" editable-select="partition.readDatasource" e-form="topicForm" e-name="partition.readDatasource" e-ng-options="ds for ds in datasource_names"></td>
							<td ng-bind="partition.writeDatasource" onshow="load_datasource_names()" editable-select="partition.writeDatasource" e-form="topicForm" e-name="partition.writeDatasource" e-ng-options="ds for ds in datasource_names"></td>
						</tr>
						<tr ng-repeat="partition in new_partitions" ng-show="topicForm.$visible">
							<td style="width: 5%;"><label ng-bind="$index  + {{partitionCount}}"></td>
							<td><select ng-model="partition.readDatasource" onshow="load_datasource_names()" ng-options="ds for ds in datasource_names" class="form-control"></select></td>
							<td><select ng-model="partition.writeDatasource" ng-options="ds for ds in datasource_names" class="form-control"></select></td>
							<td width="150px">
								<button type="button" ng-show="partition.id==-1" ng-click="remove_partition($index)" class="btn btn-danger btn-xs">
									<span class="glyphicon glyphicon-remove-circle"></span> 删除
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="panel panel-info">
			<div class="panel-heading">
				<label class="label label-info">Consumer 信息</label>
			</div>
			<div class="panel-body">
				<table class="table table-condensed table-responsive">
					<thead>
						<th class="col-md-1">ID</th>
						<th class="col-md-5">消费集群</th>
						<th class="col-md-5">应用</th>
					</thead>
					<tbody>
						<tr ng-repeat="consumer in consumers">
							<td>{{consumer.id}}</td>
							<td>{{consumer.name}}</td>
							<td>{{consumer.appIds}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>